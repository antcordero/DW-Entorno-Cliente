<!DOCTYPE html>
<html lang="en">
<head>
    <title>Juego Canvas</title>
    <style>
        canvas {
            border: 1px solid black;
        }
    </style>
</head>

<body>
    <h1>Juego: atrapar las monedas (felchas)</h1>
    <canvas id="gameCanvas" width="400" height="400"></canvas>
    <p>Puntos: <span id="score">0</span></p>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');

        let player = { x: 50, y: 50, size: 30, speed: 5 };
        let coin = { x: 200, y: 200, size: 20, collected: false };
        let score = 0;
        let keys = {};

        //teclas
        document.addEventListener('keydown', (e) => { keys[e.key] = true; });
        document.addEventListener('keyup', (e) => { keys[e.key] = false; });

        //Función para generar posición aleatoria de la moneda
        function randomPosition() {
            return Math.floor(Math.random() * (canvas.width - 40)) + 20;
        }

        //Detectar colisión
        function checkCollision(rect1, rect2) {
            return rect1.x < rect2.x + rect2.size &&
                rect1.x + rect1.size > rect2.x &&
                rect1.y < rect2.y + rect2.size &&
                rect1.y + rect1.size > rect2.y;
        }

        //Loop principal del juego
        function gameLoop() {
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Mover jugador con flechas
            if (keys['ArrowUp'] && player.y > 0) player.y -= player.speed;
            if (keys['ArrowDown'] && player.y < canvas.height - player.size) player.y += player.speed;
            if (keys['ArrowLeft'] && player.x > 0) player.x -= player.speed;
            if (keys['ArrowRight'] && player.x < canvas.width - player.size) player.x += player.speed;

            // Dibujar jugador (cuadrado verde)
            ctx.fillStyle = 'green';
            ctx.fillRect(player.x, player.y, player.size, player.size);

            // Si la moneda fue recogida, generar nueva posición
            if (coin.collected) {
                coin.x = randomPosition();
                coin.y = randomPosition();
                coin.collected = false;
            }

            // Dibujar moneda (círculo amarillo)
            ctx.beginPath();
            ctx.arc(coin.x + coin.size / 2, coin.y + coin.size / 2, coin.size / 2, 0, Math.PI * 2);
            ctx.fillStyle = 'yellow';
            ctx.fill();
            ctx.closePath();

            // Verificar colisión
            if (checkCollision(player, coin)) {
                score++;
                scoreElement.textContent = score;
                coin.collected = true;
            }

            requestAnimationFrame(gameLoop);
        }

        gameLoop(); // Iniciar el juego

    </script>
</body>

</html>